<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Bot Pro Ultimate v10 (Stable & Groups) - Lababot</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <link rel="stylesheet" href="css/bot.css">
</head>
<body class="mode-mail"> 
    <div id="error-toast" class="error-toast"><i class="fa fa-exclamation-circle"></i> <span id="error-toast-text">Ошибка</span></div>
    <div id="tooltip-popup" class="custom-tooltip-popup"></div>

    <!-- Контейнер для перетаскиваемых окон ответа -->
    <div id="response-windows-container"></div>

    <div id="minichat-modal" class="modal-overlay" onclick="closeModal('minichat-modal')">
        <div class="modal-card" onclick="event.stopPropagation()">
            <h5 id="minichat-title">Чат с ID <span id="minichat-partner-id">...</span> (<span id="minichat-partner-name">...</span>)</h5>
            <div class="text-muted small mb-2">Анкета: <span id="minichat-bot-display-id">...</span></div>
            <div class="chat-history" id="minichat-history">
                <div class="text-center text-muted small mt-5">Загрузка истории...</div>
            </div>

            <!-- AI генерация ответа -->
            <div class="mb-2 p-2 rounded" style="background: #f0f7ff; border: 1px solid #cce5ff;">
                <div class="d-flex gap-2 align-items-center">
                    <i class="fa fa-robot text-primary"></i>
                    <input id="minichat-ai-prompt" class="form-control form-control-sm" placeholder="Как ответить? (напр: игриво, романтично)">
                    <button class="btn btn-primary btn-sm" onclick="generateMiniChatAIReply()" id="minichat-ai-btn" style="white-space: nowrap;">
                        <i class="fa fa-magic"></i> AI
                    </button>
                </div>
            </div>

            <div class="d-flex gap-2">
                <textarea id="minichat-input" class="form-control" rows="2" placeholder="Сообщение..."></textarea>
                <button class="btn btn-primary" onclick="sendMiniChatMessage()"><i class="fa fa-paper-plane"></i></button>
            </div>
            <button class="btn btn-cancel-modal w-100 mt-2" onclick="closeModal('minichat-modal')">Закрыть</button>
        </div>
    </div>

    <div class="global-toolbar">
        <div class="toolbar-left">
            <button class="btn btn-success btn-circle" onclick="openAddModal()" data-tip="Анкеты"><i class="fa fa-plus"></i></button>
        </div>
        <div class="toolbar-center">
            <button class="btn btn-circle btn-logger" id="btn-logger-main" onclick="toggleLogger()" data-tip="Открыть Логгер"><i class="fa fa-list-alt"></i></button>
            <button class="btn btn-circle btn-play" onclick="startAll()" data-tip="Старт (Текущий режим)"><i class="fa fa-play"></i></button>
            
            <button class="btn btn-circle btn-stop" onclick="stopAll()" data-tip="Стоп (Текущий режим)"><i class="fa fa-stop"></i></button>
            <button class="btn btn-circle btn-clear" onclick="clearAllStats()" data-tip="Сбросить статистику всех"><i class="fa fa-eraser"></i></button>
            <button class="btn btn-circle btn-mode-switch active-mail" id="btn-mode-toggle" onclick="toggleGlobalMode()" data-tip="Переключить режим (Mail/Chat)"><i class="fa fa-envelope"></i></button>
            <button class="btn btn-circle btn-refresh" onclick="reloginAllBots()" data-tip="Перелогинить все анкеты"><i class="fa fa-sync"></i></button>
            
            <div class="status-group-wrapper">
                <button class="btn-group-toggle" id="btn-group-toggle" onclick="toggleStatusGroup()" data-tip="Показать/Скрыть статусы">
                    <i class="fa fa-caret-right"></i>
                </button>
                <div class="status-buttons-container" id="status-buttons-container">
                    <span id="global-men-online" class="men-online-badge" data-tip="Мужчин онлайн (от случайной анкеты)"><i class="fa fa-male"></i> <span id="global-men-count">0</span></span>
                    <button class="btn btn-circle btn-status-circle btn-online-color" data-status="online" onclick="setGlobalTarget('online')" oncontextmenu="toggleStatusDisabled('online', event)" data-tip="ЛКМ: Установить всем | ПКМ: Вкл/Выкл в авто"><i class="fa fa-globe"></i></button>
                    <button class="btn btn-circle btn-status-circle btn-fav-of-color" data-status="favorites" onclick="setGlobalTarget('favorites')" oncontextmenu="toggleStatusDisabled('favorites', event)" data-tip="ЛКМ: Установить всем | ПКМ: Вкл/Выкл в авто"><i class="fa fa-star"></i></button>
                    <button class="btn btn-circle btn-status-circle btn-my-fav-color" data-status="my-favorites" onclick="setGlobalTarget('my-favorites')" oncontextmenu="toggleStatusDisabled('my-favorites', event)" data-tip="ЛКМ: Установить всем | ПКМ: Вкл/Выкл в авто"><i class="fa fa-heart"></i></button>
                    <button class="btn btn-circle btn-status-circle btn-inbox-color" data-status="inbox" onclick="setGlobalTarget('inbox')" oncontextmenu="toggleStatusDisabled('inbox', event)" data-tip="ЛКМ: Установить всем | ПКМ: Вкл/Выкл в авто"><i class="fa fa-inbox"></i></button>
                    <button class="btn btn-circle btn-status-circle btn-payers-color" data-status="payers" onclick="setGlobalTarget('payers')" oncontextmenu="toggleStatusDisabled('payers', event)" data-tip="ЛКМ: Установить всем | ПКМ: Вкл/Выкл в авто"><i class="fa fa-credit-card"></i></button>
                    <button class="btn btn-circle btn-status-circle btn-custom-ids-color" onclick="openGlobalCustomIdsModal()" data-tip="Custom IDs: Рассылка по конкретным ID для всех анкет"><i class="fa fa-list-ol"></i></button>
                </div>
            </div>
        </div>
        <div class="toolbar-right">
            <span id="global-bot-count" class="bot-counter">Анкет: 0</span>
            <button class="btn btn-circle btn-settings" onclick="openGlobalSettings()" data-tip="Глобальные настройки"><i class="fa fa-cog"></i></button>
        </div>
    </div>

    <div class="tabs-container" id="tabs-bar"></div>

    <div id="main-content-wrapper">
        <div id="panels-container">
            <div id="welcome-screen">
                <p>Нажмите <strong class="text-success">+</strong> чтобы войти.</p>
                <small class="text-muted" id="restore-status"></small>
            </div>
        </div>

        <!-- 5-я колонка: Logger -->
        <div id="logger-column">
            <div class="logger-column-header">
                <span><i class="fa fa-list"></i> Лог событий</span>
                <button class="btn btn-sm btn-link text-muted p-0" onclick="toggleLogger()"><i class="fa fa-times"></i></button>
            </div>
            <div class="logger-column-content" id="logger-content">
                <div class="text-center text-muted small mt-5">Событий пока нет...</div>
            </div>
        </div>
    </div>

    <!-- === ВАЖНОЕ ДОБАВЛЕНИЕ: Контейнер для скрытых браузеров === -->
    <div id="browsers-container"></div>

    <div id="add-modal" class="modal-overlay">
        <div class="modal-card" style="width: 450px;">
            <h5>Анкеты</h5>

            <!-- Список анкет -->
            <div id="manager-list" class="mb-3" style="max-height: 150px; overflow-y: auto;"></div>

            <hr>

            <!-- Добавление новой анкеты -->
            <h6 id="add-modal-title"><i class="fa fa-plus text-success"></i> Добавить анкету</h6>
            <input id="newLogin" class="form-control form-control-sm mb-2" placeholder="Email">
            <input id="newPass" class="form-control form-control-sm mb-2" placeholder="Пароль">
            <input id="newId" class="form-control form-control-sm mb-2" placeholder="ID (вид)">
            <button id="btnLogin" class="btn btn-success btn-sm w-100 mb-2" onclick="handleLoginOrUpdate()">
                <div class="spinner" id="loginSpinner"></div>
                <span id="btnLoginText">Добавить</span>
            </button>
            <div id="loginError" class="text-danger small text-center"></div>

            <hr>

            <!-- Импорт / Экспорт -->
            <div class="d-flex gap-2 mb-3">
                <button class="btn btn-outline-success btn-sm flex-fill" onclick="exportAllData()">
                    <i class="fa fa-download"></i> Экспорт
                </button>
                <button class="btn btn-outline-primary btn-sm flex-fill" onclick="document.getElementById('importFile').click()">
                    <i class="fa fa-upload"></i> Импорт
                </button>
                <input type="file" id="importFile" hidden accept=".txt,.json" onchange="handleUniversalImport(this)">
            </div>
            <div class="alert alert-light p-2 small text-muted border">
                <b>Импорт:</b> TXT (ID Логин Пароль) или JSON (полный бекап)
            </div>

            <button class="btn btn-cancel-modal w-100 mt-3" onclick="closeModal('add-modal')">Закрыть</button>
        </div>
    </div>

    <div id="tpl-modal" class="modal-overlay">
        <div class="modal-card" style="width: 550px;">
            <h5 id="tpl-modal-title">Новый шаблон</h5>
            <div class="mb-2"><input id="tpl-modal-name" class="form-control" placeholder="Название"></div>

            <!-- AI генерация -->
            <div class="mb-2 p-2 rounded" style="background: #f0f7ff; border: 1px solid #cce5ff;">
                <div class="d-flex align-items-center gap-2 mb-2">
                    <i class="fa fa-robot text-primary"></i>
                    <small class="text-primary fw-bold">Генерация с помощью AI</small>
                </div>
                <div class="d-flex gap-2">
                    <input id="tpl-ai-prompt" class="form-control form-control-sm" placeholder="Опишите какой текст нужен (например: приглашение на свидание, романтичное)">
                    <button class="btn btn-primary btn-sm" onclick="generateTemplateWithAI()" id="tpl-ai-btn" style="white-space: nowrap;">
                        <i class="fa fa-magic"></i> Сгенерировать
                    </button>
                </div>
            </div>

            <div class="mb-3 relative-box">
                <textarea id="tpl-modal-text" class="form-control" rows="5" placeholder="Текст..." oninput="checkVarTrigger(this, 'tpl-vars-dropdown'); validateInput(this)"></textarea>
                <div id="tpl-vars-dropdown" class="vars-dropdown">
                    <div class="vars-item" onclick="applyVar('tpl-modal-text', '{City}', 'tpl-vars-dropdown')"><b>{City}</b> - Город</div>
                    <div class="vars-item" onclick="applyVar('tpl-modal-text', '{Name}', 'tpl-vars-dropdown')"><b>{Name}</b> - Имя</div>
                    <div class="vars-item" onclick="applyVar('tpl-modal-text', '{Age}', 'tpl-vars-dropdown')"><b>{Age}</b> - Возраст</div>
                </div>
            </div>
            <div class="alert alert-info small p-1 hide-in-mail" style="display:none;" id="chat-hint">
                В чате разделяйте инвайты через <b>__</b> (два подчеркивания) между абзацами.
            </div>
            <button class="btn btn-success w-100 mb-2" onclick="saveTemplateFromModal()">Сохранить</button>
            <button class="btn btn-cancel-modal w-100" onclick="closeModal('tpl-modal')">Отмена</button>
        </div>
    </div>

    <div id="bl-modal" class="modal-overlay">
        <div class="modal-card">
            <h5>Добавить в ЧС</h5>
            <input id="bl-modal-input" class="form-control mb-3" placeholder="ID">
            <button class="btn btn-danger w-100 mb-2" onclick="saveBlacklistID(event)" title="Shift = добавить всем анкетам">Добавить (Shift=всем)</button>
            <button class="btn btn-cancel-modal w-100" onclick="closeModal('bl-modal')">Отмена</button>
        </div>
    </div>

    <!-- Модальное окно: Global Custom IDs -->
    <div id="global-custom-ids-modal" class="modal-overlay">
        <div class="modal-card" style="width: 450px;">
            <h5><i class="fa fa-list-ol text-primary"></i> Custom IDs для всех анкет</h5>
            <p class="text-muted small mb-3">Введите ID мужчин для рассылки. Эти ID будут применены ко ВСЕМ анкетам (заменяют индивидуальные).</p>
            <textarea id="global-custom-ids-input" class="form-control mb-3" rows="6" placeholder="ID через запятую, пробел или каждый в новой строке&#10;Пример: 12345, 67890, 11111"></textarea>
            <div class="d-flex justify-content-between align-items-center mb-3">
                <small class="text-muted">Распознано ID: <b id="global-custom-ids-count">0</b></small>
                <button class="btn btn-sm btn-outline-secondary" onclick="clearGlobalCustomIds()"><i class="fa fa-eraser"></i> Очистить</button>
            </div>
            <button class="btn btn-primary w-100 mb-2" onclick="applyGlobalCustomIds()"><i class="fa fa-check"></i> Применить ко всем анкетам</button>
            <button class="btn btn-cancel-modal w-100" onclick="closeModal('global-custom-ids-modal')">Отмена</button>
        </div>
    </div>

    <div id="stats-modal" class="modal-overlay">
        <div class="modal-card">
            <h5 id="stats-title">Список ID</h5>
            <div id="stats-list-content" class="scroll-list" style="height: 200px;"></div>
            <div class="d-flex gap-2 mt-2">
                <button class="btn btn-outline-primary flex-fill" onclick="copyStats()">Копировать все</button>
                <button class="btn btn-outline-danger flex-fill" onclick="clearStats()">Очистить</button>
            </div>
            <button class="btn btn-cancel-modal w-100 mt-2" onclick="closeModal('stats-modal')">Закрыть</button>
        </div>
    </div>
    
    <div id="settings-modal" class="modal-overlay">
        <div class="modal-card">
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h5 class="m-0"><i class="fa fa-cog"></i> Глобальные настройки</h5>
                <button class="btn btn-sm btn-outline-secondary" onclick="closeModal('settings-modal')"><i class="fa fa-times"></i></button>
            </div>

            <!-- Вкладки -->
            <div class="settings-tabs">
                <button class="settings-tab active" onclick="switchSettingsTab('interface')"><i class="fa fa-palette"></i> Интерфейс</button>
                <button class="settings-tab" onclick="switchSettingsTab('proxy')"><i class="fa fa-globe"></i> Прокси</button>
                <button class="settings-tab" onclick="switchSettingsTab('ai')"><i class="fa fa-robot"></i> AI функции</button>
                <button class="settings-tab" onclick="switchSettingsTab('other')"><i class="fa fa-ellipsis-h"></i> Другое</button>
            </div>

            <!-- Панель: Интерфейс -->
            <div id="settings-panel-interface" class="settings-panel active">
                <div class="settings-grid">
                    <div class="settings-section">
                        <div class="settings-section-title"><i class="fa fa-language"></i> Язык и тема</div>
                        <div class="mb-2">
                            <label class="form-label small">Язык интерфейса</label>
                            <select id="set-lang" class="form-select" onchange="saveGlobalSettings()">
                                <option value="ru">Русский</option>
                                <option value="en">English</option>
                            </select>
                        </div>
                        <div class="mb-2">
                            <label class="form-label small">Тема оформления</label>
                            <select id="set-theme" class="form-select" onchange="saveGlobalSettings()">
                                <option value="light">Светлая</option>
                                <option value="dark">Тёмная</option>
                                <option value="ladadate">LadaDate</option>
                            </select>
                        </div>
                    </div>
                    <div class="settings-section">
                        <div class="settings-section-title"><i class="fa fa-sliders-h"></i> Поведение</div>
                        <div class="form-check form-switch mb-2">
                            <input class="form-check-input" type="checkbox" id="set-sounds" onchange="saveGlobalSettings()">
                            <label class="form-check-label small" for="set-sounds">Звуковые уведомления</label>
                        </div>
                        <div class="form-check form-switch mb-2">
                            <input class="form-check-input" type="checkbox" id="set-confirm-close" onchange="saveGlobalSettings()">
                            <label class="form-check-label small" for="set-confirm-close">Подтверждать закрытие вкладки</label>
                        </div>
                        <div class="form-check form-switch mb-2">
                            <input class="form-check-input" type="checkbox" id="set-hotkeys" onchange="saveGlobalSettings()">
                            <label class="form-check-label small" for="set-hotkeys">Горячие клавиши (Ctrl+Tab)</label>
                        </div>
                        <div class="form-check form-switch mb-2">
                            <input class="form-check-input" type="checkbox" id="set-extended" onchange="saveGlobalSettings(); toggleExtendedFeatures()">
                            <label class="form-check-label small" for="set-extended">Расширить возможности (AI)</label>
                        </div>
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" id="set-skip-delete-confirm" onchange="saveGlobalSettings()">
                            <label class="form-check-label small" for="set-skip-delete-confirm">Не спрашивать об удалении шаблона</label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Панель: Прокси -->
            <div id="settings-panel-proxy" class="settings-panel">
                <div class="settings-section">
                    <div class="settings-section-title"><i class="fa fa-network-wired"></i> Прокси для анкет (по позиции вкладки)</div>
                    <small class="text-muted d-block mb-3">Формат: <code>ip:port</code> — Прокси применяется к анкетам по их позиции в списке вкладок</small>

                    <div class="proxy-row">
                        <label>Анкеты 1-10:</label>
                        <input id="set-proxy-1" class="form-control form-control-sm" placeholder="ip:port" onchange="saveGlobalSettings()">
                        <button class="btn btn-outline-primary btn-test-proxy" onclick="testProxy(1)"><i class="fa fa-check"></i> Тест</button>
                        <span id="proxy-status-1" class="proxy-status"></span>
                    </div>
                    <div class="proxy-row">
                        <label>Анкеты 11-20:</label>
                        <input id="set-proxy-2" class="form-control form-control-sm" placeholder="ip:port" onchange="saveGlobalSettings()">
                        <button class="btn btn-outline-primary btn-test-proxy" onclick="testProxy(2)"><i class="fa fa-check"></i> Тест</button>
                        <span id="proxy-status-2" class="proxy-status"></span>
                    </div>
                    <div class="proxy-row">
                        <label>Анкеты 21-30:</label>
                        <input id="set-proxy-3" class="form-control form-control-sm" placeholder="ip:port" onchange="saveGlobalSettings()">
                        <button class="btn btn-outline-primary btn-test-proxy" onclick="testProxy(3)"><i class="fa fa-check"></i> Тест</button>
                        <span id="proxy-status-3" class="proxy-status"></span>
                    </div>
                    <div class="proxy-row">
                        <label>Анкеты 31-40:</label>
                        <input id="set-proxy-4" class="form-control form-control-sm" placeholder="ip:port" onchange="saveGlobalSettings()">
                        <button class="btn btn-outline-primary btn-test-proxy" onclick="testProxy(4)"><i class="fa fa-check"></i> Тест</button>
                        <span id="proxy-status-4" class="proxy-status"></span>
                    </div>
                    <div class="proxy-row">
                        <label>Анкеты 41-50:</label>
                        <input id="set-proxy-5" class="form-control form-control-sm" placeholder="ip:port" onchange="saveGlobalSettings()">
                        <button class="btn btn-outline-primary btn-test-proxy" onclick="testProxy(5)"><i class="fa fa-check"></i> Тест</button>
                        <span id="proxy-status-5" class="proxy-status"></span>
                    </div>
                    <div class="proxy-row">
                        <label>Анкеты 51-60:</label>
                        <input id="set-proxy-6" class="form-control form-control-sm" placeholder="ip:port" onchange="saveGlobalSettings()">
                        <button class="btn btn-outline-primary btn-test-proxy" onclick="testProxy(6)"><i class="fa fa-check"></i> Тест</button>
                        <span id="proxy-status-6" class="proxy-status"></span>
                    </div>
                </div>

                <div class="settings-section">
                    <div class="settings-section-title"><i class="fa fa-server"></i> Прокси для .exe (общий)</div>
                    <small class="text-muted d-block mb-2">Формат: <code>http://user:pass@ip:port</code></small>
                    <input id="set-proxy-url" class="form-control" placeholder="URL вашего прокси-сервера для .exe" onchange="saveGlobalSettings()">
                </div>
            </div>

            <!-- Панель: AI функции -->
            <div id="settings-panel-ai" class="settings-panel">
                <div class="settings-section">
                    <div class="settings-section-title"><i class="fa fa-key"></i> OpenAI API</div>
                    <div class="mb-2">
                        <label class="form-label small">API Key (sk-...)</label>
                        <input id="set-apikey" class="form-control" type="password" placeholder="Вставьте ключ здесь" onchange="saveGlobalSettings()">
                    </div>
                    <div class="mb-2">
                        <label class="form-label small">Прокси для AI (http://user:pass@ip:port)</label>
                        <input id="set-proxy-ai" class="form-control" placeholder="URL промежуточного прокси для OpenAI" onchange="saveGlobalSettings()">
                        <small class="text-muted" style="font-size:10px">Опционально: для обхода блокировок OpenAI</small>
                    </div>
                </div>
                <div class="settings-section">
                    <div class="settings-section-title"><i class="fa fa-comment-dots"></i> My Prompt</div>
                    <label class="form-label small">Введите свой промт для кнопки "My Prompt"</label>
                    <textarea id="set-prompt" class="form-control" rows="3" placeholder="Напиши здесь промт для AI..." onchange="saveGlobalSettings()"></textarea>
                </div>
                <div class="settings-section">
                    <div class="settings-section-title"><i class="fa fa-reply"></i> Промпт для ответов</div>
                    <label class="form-label small">Инструкция для AI при генерации ответов на письма</label>
                    <textarea id="set-ai-reply-prompt" class="form-control" rows="2" placeholder="Напр: отвечай романтично, с комплиментами, задавай вопросы" onchange="saveGlobalSettings()"></textarea>
                    <small class="text-muted" style="font-size:10px">Используется в MiniChat при нажатии кнопки AI</small>
                </div>
            </div>

            <!-- Панель: Другое -->
            <div id="settings-panel-other" class="settings-panel">
                <div class="settings-section">
                    <div class="settings-section-title"><i class="fa fa-chart-bar"></i> Статистика Lababot</div>
                    <label class="form-label small">Translator ID</label>
                    <input id="set-translator-id" class="form-control" type="number" placeholder="Введите ID переводчика (опционально)" onchange="saveGlobalSettings()">
                    <small class="text-muted" style="font-size:10px">Этот ID будет отправляться в статистике на сервер Lababot</small>
                </div>
                <div class="settings-section">
                    <div class="settings-section-title"><i class="fa fa-info-circle"></i> Инструкция</div>
                    <div class="text-muted small">
                        <p><b>1.</b> Для браузера: установите расширение <b>Proxy SwitchyOmega</b></p>
                        <p><b>2.</b> Для .exe: заполните "Прокси для .exe" на вкладке Прокси</p>
                        <p><b>3.</b> Для AI: получите ключ на <b>platform.openai.com</b></p>
                    </div>
                </div>
                <div class="settings-section">
                    <div class="settings-section-title"><i class="fa fa-database"></i> Данные</div>
                    <div class="d-flex gap-2">
                        <button class="btn btn-outline-secondary btn-sm" onclick="exportSettings()"><i class="fa fa-download"></i> Экспорт настроек</button>
                        <button class="btn btn-outline-secondary btn-sm" onclick="importSettings()"><i class="fa fa-upload"></i> Импорт настроек</button>
                    </div>
                </div>
            </div>

            <!-- Скрытое поле для совместимости -->
            <input type="hidden" id="set-proxy" value="">

            <div class="d-flex gap-2 mt-3">
                <button class="btn btn-success flex-fill" onclick="saveGlobalSettings(); closeModal('settings-modal')"><i class="fa fa-save"></i> Сохранить</button>
                <button class="btn btn-outline-secondary flex-fill" onclick="closeModal('settings-modal')">Закрыть</button>
            </div>
        </div>
    </div>
    
    <!-- Модули (разделённый bot.js) - порядок загрузки критичен! -->
    <script src="js/modules/config.js"></script>      <!-- 1. Глобальные переменные и константы -->
    <script src="js/modules/utils.js"></script>       <!-- 2. Утилиты, parseProxy, validateInput -->
    <script src="js/modules/api.js"></script>         <!-- 3. API функции для Lababot сервера -->
    <script src="js/modules/logger.js"></script>      <!-- 4. Logger, KEEP_ALIVE_SCRIPT -->
    <script src="js/modules/minichat.js"></script>    <!-- 5. MiniChat функции -->
    <script src="js/modules/ai.js"></script>          <!-- 6. AI функции -->
    <script src="js/modules/settings.js"></script>    <!-- 7. Настройки -->
    <script src="js/modules/AccountBot.js"></script>  <!-- 8. Класс AccountBot -->
    <script src="js/modules/main.js"></script>        <!-- 9. UI функции и основная логика -->
    <script src="js/modules/init.js"></script>        <!-- 10. Инициализация (window.onload) -->
</body>
</html>